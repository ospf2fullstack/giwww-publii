<!DOCTYPE html><html lang="en-gb"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Duplicate IP! - 5.27.2019 - Gary Innerarity</title><meta name="description" content="Well, I'm dealing with this on my night off. 42 of my Meraki access points are yelling and complaining like a bunch of kids shopping with their mommy during a hot summer day about not finding home. Yeah, I mean, I'm upset too. I drove&hellip;"><meta name="generator" content="Publii Open-Source CMS for Static Site"><link rel="canonical" href="https://publii.garyinnerarity.com/duplicate-ip-5272019/"><link rel="amphtml" href="https://publii.garyinnerarity.com/amp/duplicate-ip-5272019/"><link rel="alternate" type="application/atom+xml" href="https://publii.garyinnerarity.com/feed.xml"><link rel="alternate" type="application/json" href="https://publii.garyinnerarity.com/feed.json"><meta property="og:title" content="Duplicate IP! - 5.27.2019"><meta property="og:image" content="https://publii.garyinnerarity.com/media/website/Site-Logo-2.png"><meta property="og:site_name" content="Gary Innerarity"><meta property="og:description" content="Well, I'm dealing with this on my night off. 42 of my Meraki access points are yelling and complaining like a bunch of kids shopping with their mommy during a hot summer day about not finding home. Yeah, I mean, I'm upset too. I drove&hellip;"><meta property="og:url" content="https://publii.garyinnerarity.com/duplicate-ip-5272019/"><meta property="og:type" content="article"><meta name="twitter:card" content="summary"><meta name="twitter:site" content="@ospf2fullstack"><meta name="twitter:title" content="Duplicate IP! - 5.27.2019"><meta name="twitter:description" content="Well, I'm dealing with this on my night off. 42 of my Meraki access points are yelling and complaining like a bunch of kids shopping with their mommy during a hot summer day about not finding home. Yeah, I mean, I'm upset too. I drove&hellip;"><meta name="twitter:image" content="https://publii.garyinnerarity.com/media/website/Site-Logo-2.png"><link rel="stylesheet" href="https://publii.garyinnerarity.com/assets/css/style.css?v=08042fa161ed0afdadab65e17096ecea"><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://publii.garyinnerarity.com/duplicate-ip-5272019/"},"headline":"Duplicate IP! - 5.27.2019","datePublished":"2019-05-27T20:24","dateModified":"2022-10-13T09:57","image":{"@type":"ImageObject","url":"https://publii.garyinnerarity.com/media/website/Site-Logo-2.png","height":876,"width":1580},"description":"Well, I'm dealing with this on my night off. 42 of my Meraki access points are yelling and complaining like a bunch of kids shopping with their mommy during a hot summer day about not finding home. Yeah, I mean, I'm upset too. I drove&hellip;","author":{"@type":"Person","name":"Gary Innerarity","url":"https://publii.garyinnerarity.com/authors/gary-innerarity/"},"publisher":{"@type":"Organization","name":"Gary Innerarity","logo":{"@type":"ImageObject","url":"https://publii.garyinnerarity.com/media/website/Site-Logo-2.png","height":876,"width":1580}}}</script></head><body><header class="topbar" id="js-header"><div class="topbar__inner"><a class="logo" href="https://publii.garyinnerarity.com/"><img src="https://publii.garyinnerarity.com/media/website/Site-Logo-2.png" alt="Gary Innerarity" width="1580" height="876"></a><nav class="navbar"><button class="navbar__toggle" aria-label="Menu" aria-haspopup="true" aria-expanded="false"><span class="navbar__toggle-box"><span class="navbar__toggle-inner">Menu</span></span></button><ul class="navbar__menu"><li><a href="https://publii.garyinnerarity.com/" target="_self">Home</a></li><li><a href="https://publii.garyinnerarity.com/tags/" target="_self">Categories</a></li></ul></nav></div></header><div class="content"><div class="infobar"><div class="infobar__update">Last Updated: <time datetime="2022-10-13T10:06">October 13, 2022</time></div><div class="infobar__search"></div></div><main class="main"><article class="post"><header class="u-header post__header"><h1>Duplicate IP! - 5.27.2019</h1><div class="u-header__meta u-small"><div><a href="https://publii.garyinnerarity.com/authors/gary-innerarity/" title="Gary Innerarity">Gary Innerarity</a> <time datetime="2019-05-27T20:24">May 27, 2019</time></div></div></header><div class="post__entry u-inner"><p></p><figure class="wp-block-image"><figure class="wp-image-254"><img loading="lazy" src="https://publii.garyinnerarity.com/media/posts/34/alerting.png" sizes="(max-width: 48em) 100vw, 768px" srcset="https://publii.garyinnerarity.com/media/posts/34/responsive/alerting-xs.png 300w, https://publii.garyinnerarity.com/media/posts/34/responsive/alerting-sm.png 480w, https://publii.garyinnerarity.com/media/posts/34/responsive/alerting-md.png 768w, https://publii.garyinnerarity.com/media/posts/34/responsive/alerting-lg.png 1024w, https://publii.garyinnerarity.com/media/posts/34/responsive/alerting-xl.png 1360w, https://publii.garyinnerarity.com/media/posts/34/responsive/alerting-2xl.png 1600w" alt=""></figure></figure><p></p><p></p><p>Well, I'm dealing with this on my night off. 42 of my Meraki access points are yelling and complaining like a bunch of kids shopping with their mommy during a hot summer day about not finding home.</p><p></p><p></p><div class="wp-block-media-text alignwide"><figure class="wp-block-media-text__media"><figure class="wp-image-257"><img loading="lazy" src="https://publii.garyinnerarity.com/media/posts/34/42-1.png" sizes="(max-width: 48em) 100vw, 768px" srcset="https://publii.garyinnerarity.com/media/posts/34/responsive/42-1-xs.png 300w, https://publii.garyinnerarity.com/media/posts/34/responsive/42-1-sm.png 480w, https://publii.garyinnerarity.com/media/posts/34/responsive/42-1-md.png 768w, https://publii.garyinnerarity.com/media/posts/34/responsive/42-1-lg.png 1024w, https://publii.garyinnerarity.com/media/posts/34/responsive/42-1-xl.png 1360w, https://publii.garyinnerarity.com/media/posts/34/responsive/42-1-2xl.png 1600w" alt=""></figure></figure><div class="wp-block-media-text__content"><p></p><p class="has-large-font-size">Yeah, I mean, I'm upset too.</p><p></p></div></div><p></p><p></p><p>I drove 45 minutes to work (yep, I commute)... Upon arrival, I decided to get my priorities straight, so I started Spotify and played by favorite playlist (lots of hip-hop) of aggressive music.</p><p></p><p></p><p>I then started to TSHOOT by logging into Meraki &gt; Wireless &gt; Monitor &gt; Access Points where I confirmed if any errors were still populating. They were.</p><p></p><p></p><ul class="wp-block-gallery columns-3 is-cropped"><li class="blocks-gallery-item"><figure><figure class="wp-image-258"><img loading="lazy" src="https://publii.garyinnerarity.com/media/posts/34/alerting-2.png" sizes="(max-width: 48em) 100vw, 768px" srcset="https://publii.garyinnerarity.com/media/posts/34/responsive/alerting-2-xs.png 300w, https://publii.garyinnerarity.com/media/posts/34/responsive/alerting-2-sm.png 480w, https://publii.garyinnerarity.com/media/posts/34/responsive/alerting-2-md.png 768w, https://publii.garyinnerarity.com/media/posts/34/responsive/alerting-2-lg.png 1024w, https://publii.garyinnerarity.com/media/posts/34/responsive/alerting-2-xl.png 1360w, https://publii.garyinnerarity.com/media/posts/34/responsive/alerting-2-2xl.png 1600w" alt="" data-id="258" data-link="https://ospfcommand.com/alerting-2/"></figure></figure></li><li class="blocks-gallery-item"><figure><figure class="wp-image-259"><img loading="lazy" src="https://publii.garyinnerarity.com/media/posts/34/alerting-3.png" sizes="(max-width: 48em) 100vw, 768px" srcset="https://publii.garyinnerarity.com/media/posts/34/responsive/alerting-3-xs.png 300w, https://publii.garyinnerarity.com/media/posts/34/responsive/alerting-3-sm.png 480w, https://publii.garyinnerarity.com/media/posts/34/responsive/alerting-3-md.png 768w, https://publii.garyinnerarity.com/media/posts/34/responsive/alerting-3-lg.png 1024w, https://publii.garyinnerarity.com/media/posts/34/responsive/alerting-3-xl.png 1360w, https://publii.garyinnerarity.com/media/posts/34/responsive/alerting-3-2xl.png 1600w" alt="" data-id="259" data-link="https://ospfcommand.com/alerting-3/"></figure></figure></li><li class="blocks-gallery-item"><figure><figure class="wp-image-260"><img loading="lazy" src="https://publii.garyinnerarity.com/media/posts/34/alerting-4.png" sizes="(max-width: 48em) 100vw, 768px" srcset="https://publii.garyinnerarity.com/media/posts/34/responsive/alerting-4-xs.png 300w, https://publii.garyinnerarity.com/media/posts/34/responsive/alerting-4-sm.png 480w, https://publii.garyinnerarity.com/media/posts/34/responsive/alerting-4-md.png 768w, https://publii.garyinnerarity.com/media/posts/34/responsive/alerting-4-lg.png 1024w, https://publii.garyinnerarity.com/media/posts/34/responsive/alerting-4-xl.png 1360w, https://publii.garyinnerarity.com/media/posts/34/responsive/alerting-4-2xl.png 1600w" alt="" data-id="260" data-link="https://ospfcommand.com/alerting-4/"></figure></figure></li><li class="blocks-gallery-item"><figure><figure class="wp-image-261"><img loading="lazy" src="https://publii.garyinnerarity.com/media/posts/34/alerting-5.png" sizes="(max-width: 48em) 100vw, 768px" srcset="https://publii.garyinnerarity.com/media/posts/34/responsive/alerting-5-xs.png 300w, https://publii.garyinnerarity.com/media/posts/34/responsive/alerting-5-sm.png 480w, https://publii.garyinnerarity.com/media/posts/34/responsive/alerting-5-md.png 768w, https://publii.garyinnerarity.com/media/posts/34/responsive/alerting-5-lg.png 1024w, https://publii.garyinnerarity.com/media/posts/34/responsive/alerting-5-xl.png 1360w, https://publii.garyinnerarity.com/media/posts/34/responsive/alerting-5-2xl.png 1600w" alt="" data-id="261" data-link="https://ospfcommand.com/alerting-5/"></figure></figure></li><li class="blocks-gallery-item"><figure><figure class="wp-image-262"><img loading="lazy" src="https://publii.garyinnerarity.com/media/posts/34/alerting-6.png" sizes="(max-width: 48em) 100vw, 768px" srcset="https://publii.garyinnerarity.com/media/posts/34/responsive/alerting-6-xs.png 300w, https://publii.garyinnerarity.com/media/posts/34/responsive/alerting-6-sm.png 480w, https://publii.garyinnerarity.com/media/posts/34/responsive/alerting-6-md.png 768w, https://publii.garyinnerarity.com/media/posts/34/responsive/alerting-6-lg.png 1024w, https://publii.garyinnerarity.com/media/posts/34/responsive/alerting-6-xl.png 1360w, https://publii.garyinnerarity.com/media/posts/34/responsive/alerting-6-2xl.png 1600w" alt="" data-id="262" data-link="https://ospfcommand.com/alerting-6/"></figure></figure></li><li class="blocks-gallery-item"><figure><figure class="wp-image-263"><img loading="lazy" src="https://publii.garyinnerarity.com/media/posts/34/alerting-7.png" sizes="(max-width: 48em) 100vw, 768px" srcset="https://publii.garyinnerarity.com/media/posts/34/responsive/alerting-7-xs.png 300w, https://publii.garyinnerarity.com/media/posts/34/responsive/alerting-7-sm.png 480w, https://publii.garyinnerarity.com/media/posts/34/responsive/alerting-7-md.png 768w, https://publii.garyinnerarity.com/media/posts/34/responsive/alerting-7-lg.png 1024w, https://publii.garyinnerarity.com/media/posts/34/responsive/alerting-7-xl.png 1360w, https://publii.garyinnerarity.com/media/posts/34/responsive/alerting-7-2xl.png 1600w" alt="" data-id="263" data-link="https://ospfcommand.com/alerting-7/"></figure></figure></li><li class="blocks-gallery-item"><figure><figure class="wp-image-264"><img loading="lazy" src="https://publii.garyinnerarity.com/media/posts/34/alerting-8.png" sizes="(max-width: 48em) 100vw, 768px" srcset="https://publii.garyinnerarity.com/media/posts/34/responsive/alerting-8-xs.png 300w, https://publii.garyinnerarity.com/media/posts/34/responsive/alerting-8-sm.png 480w, https://publii.garyinnerarity.com/media/posts/34/responsive/alerting-8-md.png 768w, https://publii.garyinnerarity.com/media/posts/34/responsive/alerting-8-lg.png 1024w, https://publii.garyinnerarity.com/media/posts/34/responsive/alerting-8-xl.png 1360w, https://publii.garyinnerarity.com/media/posts/34/responsive/alerting-8-2xl.png 1600w" alt="" data-id="264" data-link="https://ospfcommand.com/alerting-8/"></figure></figure></li><li class="blocks-gallery-item"><figure><figure class="wp-image-265"><img loading="lazy" src="https://publii.garyinnerarity.com/media/posts/34/alerting-9.png" sizes="(max-width: 48em) 100vw, 768px" srcset="https://publii.garyinnerarity.com/media/posts/34/responsive/alerting-9-xs.png 300w, https://publii.garyinnerarity.com/media/posts/34/responsive/alerting-9-sm.png 480w, https://publii.garyinnerarity.com/media/posts/34/responsive/alerting-9-md.png 768w, https://publii.garyinnerarity.com/media/posts/34/responsive/alerting-9-lg.png 1024w, https://publii.garyinnerarity.com/media/posts/34/responsive/alerting-9-xl.png 1360w, https://publii.garyinnerarity.com/media/posts/34/responsive/alerting-9-2xl.png 1600w" alt="" data-id="265" data-link="https://ospfcommand.com/alerting-9/"></figure></figure></li><li class="blocks-gallery-item"><figure><figure class="wp-image-266"><img loading="lazy" src="https://publii.garyinnerarity.com/media/posts/34/alerting-10.png" sizes="(max-width: 48em) 100vw, 768px" srcset="https://publii.garyinnerarity.com/media/posts/34/responsive/alerting-10-xs.png 300w, https://publii.garyinnerarity.com/media/posts/34/responsive/alerting-10-sm.png 480w, https://publii.garyinnerarity.com/media/posts/34/responsive/alerting-10-md.png 768w, https://publii.garyinnerarity.com/media/posts/34/responsive/alerting-10-lg.png 1024w, https://publii.garyinnerarity.com/media/posts/34/responsive/alerting-10-xl.png 1360w, https://publii.garyinnerarity.com/media/posts/34/responsive/alerting-10-2xl.png 1600w" alt="" data-id="266" data-link="https://ospfcommand.com/alerting-10/"></figure></figure></li></ul><p></p><p></p><p>I immediately decided that I needed to verify if I added/removed any devices from my network by matching up the dates from when the alerting started and my ticket queue. We decommissioned a few network devices, but we made zero network changes.</p><p></p><p></p><p>Phase II, I RDP'd into my DHCP and DNS server to validate the AP IP addresses. All checked out. I then reviewed DHCP for any "Bad Addresses". I had 50+ "Bad Addresses"... Yeah, that's an issue. They were all on the same VLAN (20) that Meraki was claiming DHCP failures on (5/5 transmit failures on VLAN 20).</p><p></p><p></p><p>Okay, so I deleted the "Bad Addresses" since nobody was on campus just to see if we had a stuck entry or caching issue. Most of the IP entries did not come back online. Great. Moving on.</p><p></p><p></p><p>Phase III, I panned over to my DNS server. Wow, okay, I have a lot of clean up that I need to do... PTR entries from 2016!! Okay, I'll delete most of those entries (since I knew that they were not needed). Checked AP status, we're almost there, I'm starting to see AP's come online.</p><p></p><p></p><figure class="wp-block-image"><figure class="wp-image-267"><img loading="lazy" src="https://publii.garyinnerarity.com/media/posts/34/halfway.png" sizes="(max-width: 48em) 100vw, 768px" srcset="https://publii.garyinnerarity.com/media/posts/34/responsive/halfway-xs.png 300w, https://publii.garyinnerarity.com/media/posts/34/responsive/halfway-sm.png 480w, https://publii.garyinnerarity.com/media/posts/34/responsive/halfway-md.png 768w, https://publii.garyinnerarity.com/media/posts/34/responsive/halfway-lg.png 1024w, https://publii.garyinnerarity.com/media/posts/34/responsive/halfway-xl.png 1360w, https://publii.garyinnerarity.com/media/posts/34/responsive/halfway-2xl.png 1600w" alt=""></figure></figure><p></p><p></p><p>I then decide to go back to DHCP and refresh the lists to see if any entries have been updated. Welp, there she was... ap0016xx.domain.com with a VLAN 20 ip address... I don't know about you, but I don't put my access points on access vlans. AP's belong on the network VLANs.</p><p></p><p></p><p>I take the device name and search Meraki, bing! It pops up immediately with a conflicting IP address! I trace the source port and disable the switchport. The AP goes offline. I refresh my Meraki dashboard and continue to delete the remaining "Bad Addresses" from my DHCP.</p><p></p><p></p><figure class="wp-block-image"><figure class="wp-image-268"><img loading="lazy" src="https://publii.garyinnerarity.com/media/posts/34/saved.png" sizes="(max-width: 48em) 100vw, 768px" srcset="https://publii.garyinnerarity.com/media/posts/34/responsive/saved-xs.png 300w, https://publii.garyinnerarity.com/media/posts/34/responsive/saved-sm.png 480w, https://publii.garyinnerarity.com/media/posts/34/responsive/saved-md.png 768w, https://publii.garyinnerarity.com/media/posts/34/responsive/saved-lg.png 1024w, https://publii.garyinnerarity.com/media/posts/34/responsive/saved-xl.png 1360w, https://publii.garyinnerarity.com/media/posts/34/responsive/saved-2xl.png 1600w" alt=""></figure></figure><p></p><p></p><p>Success! All AP's are online.</p><p></p><p></p><p>I then, physically, traced down the rogue AP in my environment and found that it was coming from our intern VLAN with a DHCP and Print server on it... The dated DNS records was giving our intern server an old Cisco AP name! Several things happened here that could have prevented this issue, however, it was a great reminder that we must stick to our "Maintenance" schedules and keep our network as clean as possible with regular updates and checks of all systems.</p><p></p><p></p><hr class="wp-block-separator"><p></p><p></p><p>Resource Credits:</p><p></p><p></p><ul><li><a href="https://www.microsoft.com/en-us/licensing/product-licensing/windows-server-2012-r2?activetab=windows-server-2012-r2-pivot%3aprimaryr2">Windows Server 2012 R2 Datacenter</a></li><li><a href="https://www.spotify.com/us/">Spotify</a></li><li><a href="https://meraki.cisco.com/">Meraki</a></li></ul><p></p></div><aside class="post__aside"><div class="post__last-updated u-small">This article was updated on October 13, 2022</div><div class="post__share"><a href="https://twitter.com/share?url=https%3A%2F%2Fpublii.garyinnerarity.com%2Fduplicate-ip-5272019%2F&amp;via=%40ospf2fullstack&amp;text=Duplicate%20IP!%20-%205.27.2019" class="js-share twitter" title="Share with Twitter" rel="nofollow noopener noreferrer" aria-label="Share with Twitter"><svg class="u-icon"><use xlink:href="https://publii.garyinnerarity.com/assets/svg/svg-map.svg#twitter"/></svg></a></div></aside><footer class="post__footer"><div class="post__bio box"><div><h4 class="h6"><a href="https://publii.garyinnerarity.com/authors/gary-innerarity/" title="Gary Innerarity">Gary Innerarity</a></h4></div></div><nav class="post__nav box"><div class="post__nav__prev"><a href="https://publii.garyinnerarity.com/cybersec-andamp-fraud-5222019/" class="post__nav__link" rel="prev"><div class="u-small">Previous Post<h5>CyberSec &amp;amp; Fraud - 5.22.2019</h5></div></a></div><div class="post__nav__next"><a href="https://publii.garyinnerarity.com/cdp-neighbor-622019/" class="post__nav__link" rel="next"><div class="u-small">Next Post<h5>CDP Neighbor - 6.2.2019</h5></div></a></div></nav></footer></article></main><div class="sidebar"><section class="box authors"><h3 class="box__title">Authors</h3><ul class="authors__cotainer"><li class="authors__item"><div><a href="https://publii.garyinnerarity.com/authors/gary-innerarity/" class="authors__title">Gary Innerarity</a></div></li></ul></section></div><footer class="footer"><a class="footer__logo" href="https://publii.garyinnerarity.com/"><img src="https://publii.garyinnerarity.com/media/website/Site-Logo-2.png" alt="Gary Innerarity" width="1580" height="876"></a><nav><ul class="footer__nav"></ul></nav><div class="footer__copyright"><p>Proudly created with Publii and published globally with Github and CloudFlare.</p></div></footer></div><script>window.publiiThemeMenuConfig = {    
        mobileMenuMode: 'sidebar',
        animationSpeed: 300,
        submenuWidth: 'auto',
        doubleClickTime: 500,
        mobileMenuExpandableSubmenus: true, 
        relatedContainerForOverlayMenuSelector: '.navbar',
   };</script><script defer="defer" src="https://publii.garyinnerarity.com/assets/js/scripts.min.js?v=ef33954c8f912e6c18ee116825aadc90"></script><script>var images = document.querySelectorAll('img[loading]');

      for (var i = 0; i < images.length; i++) {
         if (images[i].complete) {
               images[i].classList.add('is-loaded');
         } else {
               images[i].addEventListener('load', function () {
                  this.classList.add('is-loaded');
               }, false);
         }
      }</script></body></html>