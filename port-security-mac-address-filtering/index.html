<!DOCTYPE html><html lang="en-gb"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Port-Security (Mac-Address Filtering) - Gary Innerarity</title><meta name="description" content="Port-Security is fundamentally great to implement, especially since this command supports both static (Sticky) and dynamic mac-address filtering. Basic configuration: ##Open Interface##(config)#int e0/2##Enable Port-Security##(config-if)#switchport port-security##Allow a specific mac-address##(config-if)#switchport port-security mac-address aabb.ccdd.eeff##Only Allow a single mac-address##(config-if)#switchport port-security maximum 1##If policy is violated, err-disable port##(config-if)#switchport port-security violation&hellip;"><meta name="generator" content="Publii Open-Source CMS for Static Site"><link rel="canonical" href="https://publii.garyinnerarity.com/port-security-mac-address-filtering/"><link rel="amphtml" href="https://publii.garyinnerarity.com/amp/port-security-mac-address-filtering/"><link rel="alternate" type="application/atom+xml" href="https://publii.garyinnerarity.com/feed.xml"><link rel="alternate" type="application/json" href="https://publii.garyinnerarity.com/feed.json"><meta property="og:title" content="Port-Security (Mac-Address Filtering)"><meta property="og:image" content="https://publii.garyinnerarity.com/media/website/Site-Logo-2.png"><meta property="og:site_name" content="Gary Innerarity"><meta property="og:description" content="Port-Security is fundamentally great to implement, especially since this command supports both static (Sticky) and dynamic mac-address filtering. Basic configuration: ##Open Interface##(config)#int e0/2##Enable Port-Security##(config-if)#switchport port-security##Allow a specific mac-address##(config-if)#switchport port-security mac-address aabb.ccdd.eeff##Only Allow a single mac-address##(config-if)#switchport port-security maximum 1##If policy is violated, err-disable port##(config-if)#switchport port-security violation&hellip;"><meta property="og:url" content="https://publii.garyinnerarity.com/port-security-mac-address-filtering/"><meta property="og:type" content="article"><meta name="twitter:card" content="summary"><meta name="twitter:site" content="@ospf2fullstack"><meta name="twitter:title" content="Port-Security (Mac-Address Filtering)"><meta name="twitter:description" content="Port-Security is fundamentally great to implement, especially since this command supports both static (Sticky) and dynamic mac-address filtering. Basic configuration: ##Open Interface##(config)#int e0/2##Enable Port-Security##(config-if)#switchport port-security##Allow a specific mac-address##(config-if)#switchport port-security mac-address aabb.ccdd.eeff##Only Allow a single mac-address##(config-if)#switchport port-security maximum 1##If policy is violated, err-disable port##(config-if)#switchport port-security violation&hellip;"><meta name="twitter:image" content="https://publii.garyinnerarity.com/media/website/Site-Logo-2.png"><link rel="stylesheet" href="https://publii.garyinnerarity.com/assets/css/style.css?v=08042fa161ed0afdadab65e17096ecea"><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://publii.garyinnerarity.com/port-security-mac-address-filtering/"},"headline":"Port-Security (Mac-Address Filtering)","datePublished":"2019-07-06T16:07","dateModified":"2022-10-13T09:57","image":{"@type":"ImageObject","url":"https://publii.garyinnerarity.com/media/website/Site-Logo-2.png","height":876,"width":1580},"description":"Port-Security is fundamentally great to implement, especially since this command supports both static (Sticky) and dynamic mac-address filtering. Basic configuration: ##Open Interface##(config)#int e0/2##Enable Port-Security##(config-if)#switchport port-security##Allow a specific mac-address##(config-if)#switchport port-security mac-address aabb.ccdd.eeff##Only Allow a single mac-address##(config-if)#switchport port-security maximum 1##If policy is violated, err-disable port##(config-if)#switchport port-security violation&hellip;","author":{"@type":"Person","name":"Gary Innerarity","url":"https://publii.garyinnerarity.com/authors/gary-innerarity/"},"publisher":{"@type":"Organization","name":"Gary Innerarity","logo":{"@type":"ImageObject","url":"https://publii.garyinnerarity.com/media/website/Site-Logo-2.png","height":876,"width":1580}}}</script></head><body><header class="topbar" id="js-header"><div class="topbar__inner"><a class="logo" href="https://publii.garyinnerarity.com/"><img src="https://publii.garyinnerarity.com/media/website/Site-Logo-2.png" alt="Gary Innerarity" width="1580" height="876"></a><nav class="navbar"><button class="navbar__toggle" aria-label="Menu" aria-haspopup="true" aria-expanded="false"><span class="navbar__toggle-box"><span class="navbar__toggle-inner">Menu</span></span></button><ul class="navbar__menu"><li><a href="https://publii.garyinnerarity.com/" target="_self">Home</a></li><li><a href="https://publii.garyinnerarity.com/tags/" target="_self">Categories</a></li></ul></nav></div></header><div class="content"><div class="infobar"><div class="infobar__update">Last Updated: <time datetime="2022-10-13T10:11">October 13, 2022</time></div><div class="infobar__search"></div></div><main class="main"><article class="post"><header class="u-header post__header"><h1>Port-Security (Mac-Address Filtering)</h1><div class="u-header__meta u-small"><div><a href="https://publii.garyinnerarity.com/authors/gary-innerarity/" title="Gary Innerarity">Gary Innerarity</a> <time datetime="2019-07-06T16:07">July 6, 2019</time></div></div></header><div class="post__entry u-inner"><p></p><p>Port-Security is fundamentally great to implement, especially since this command supports both static (Sticky) and dynamic mac-address filtering.</p><p></p><p></p><p>Basic configuration:</p><p></p><p></p><pre class="wp-block-code"><code>##Open Interface##<restore-line-break>(config)#int e0/2<restore-line-break><restore-line-break>##Enable Port-Security##<restore-line-break>(config-if)#switchport port-security<restore-line-break><restore-line-break>##Allow a specific mac-address##<restore-line-break>(config-if)#switchport port-security mac-address aabb.ccdd.eeff<restore-line-break><restore-line-break>##Only Allow a single mac-address##<restore-line-break>(config-if)#switchport port-security maximum 1<restore-line-break><restore-line-break>##If policy is violated, err-disable port##<restore-line-break>(config-if)#switchport port-security violation shutdown</restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></code></pre><p></p><p></p><p>Verify configuration on the interface:</p><p></p><p></p><pre class="wp-block-code"><code>#show port-security interface e0/2<restore-line-break>Sw1#sh port-security int e0/2<restore-line-break>Port Security              : Enabled<restore-line-break>Port Status                : Secure-up<restore-line-break>Violation Mode             : Shutdown<restore-line-break>Aging Time                 : 0 mins<restore-line-break>Aging Type                 : Absolute<restore-line-break>SecureStatic Address Aging : Disabled<restore-line-break>Maximum MAC Addresses      : 1<restore-line-break>Total MAC Addresses        : 1<restore-line-break>Configured MAC Addresses   : 1<restore-line-break>Sticky MAC Addresses       : 0<restore-line-break>Last Source Address:Vlan   : aabb.ccdd.eeff:10<restore-line-break>Security Violation Count   : 0</restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></code></pre><p></p><p></p><figure class="wp-block-image"><figure class="wp-image-455"><img loading="lazy" src="https://publii.garyinnerarity.com/media/posts/43/portsecurity.png" sizes="(max-width: 48em) 100vw, 768px" srcset="https://publii.garyinnerarity.com/media/posts/43/responsive/portsecurity-xs.png 300w, https://publii.garyinnerarity.com/media/posts/43/responsive/portsecurity-sm.png 480w, https://publii.garyinnerarity.com/media/posts/43/responsive/portsecurity-md.png 768w, https://publii.garyinnerarity.com/media/posts/43/responsive/portsecurity-lg.png 1024w, https://publii.garyinnerarity.com/media/posts/43/responsive/portsecurity-xl.png 1360w, https://publii.garyinnerarity.com/media/posts/43/responsive/portsecurity-2xl.png 1600w" alt=""></figure></figure><p></p><p></p><hr class="wp-block-separator"><p></p><p></p><p>View from both devices:</p><p></p><p></p><p>Once the Router (R1) changes it's mac-address, it will err-disable the Switchport from Sw1.Â </p><p></p><p></p><pre class="wp-block-code"><code>R1(config)#interface e0/0<restore-line-break>R1(config-if)#mac-address aabb.ccff.eeff</restore-line-break></code></pre><p></p><p></p><pre class="wp-block-code"><code>Sw1#<restore-line-break>*Jul  6 17:14:56.613: %PM-4-ERR_DISABLE: psecure-violation error detected on Et0/2, putting Et0/2 in err-disabl<restore-line-break>e state<restore-line-break>Sw1#<restore-line-break>*Jul  6 17:14:56.613: %PORT_SECURITY-2-PSECURE_VIOLATION: Security violation occurred, caused by MAC address aa<restore-line-break>bb.ccff.eeff on port Ethernet0/2.<restore-line-break>*Jul  6 17:14:57.621: %LINEPROTO-5-UPDOWN: Line protocol on Interface Ethernet0/2, changed state to down<restore-line-break>Sw1#<restore-line-break>*Jul  6 17:14:58.617: %LINK-3-UPDOWN: Interface Ethernet0/2, changed state to down<restore-line-break>Sw1#</restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></restore-line-break></code></pre><p></p><p></p><p>To fix the err-disable, you will want to put the original MAC-address back on R1 or add the new mac-address to the port-security interface. Then, you will want to cycle the switchport. (shut/no shut) - verify w/ ping.Â </p><p></p><p></p><hr class="wp-block-separator"><p></p><p></p><p>If you want/need to save the mac-address that was learned after a reboot, you will need to use this:&nbsp;</p><p></p><p></p><p></p><pre class="wp-block-code"><code>(config)#int e0/2<restore-line-break>(config-if)#switchport port-security mac-address sticky aabb.ccdd.eeff<restore-line-break>#wr</restore-line-break></restore-line-break></code></pre><p></p><p></p><p>If you get an error, perform this first, to remove any previously set mac-address:</p><p></p><p></p><p></p><pre class="wp-block-code"><code>(config-if)#no switchport port-security mac-address aabb.ccdd.eeff <restore-line-break><restore-line-break>##followed by: <restore-line-break><restore-line-break>(config-if)#switchport port-security mac-address sticky aabb.ccdd.eeff</restore-line-break></restore-line-break></restore-line-break></restore-line-break></code></pre><p></p><p></p><p></p></div><aside class="post__aside"><div class="post__last-updated u-small">This article was updated on October 13, 2022</div><div class="post__share"><a href="https://twitter.com/share?url=https%3A%2F%2Fpublii.garyinnerarity.com%2Fport-security-mac-address-filtering%2F&amp;via=%40ospf2fullstack&amp;text=Port-Security%20(Mac-Address%20Filtering)" class="js-share twitter" title="Share with Twitter" rel="nofollow noopener noreferrer" aria-label="Share with Twitter"><svg class="u-icon"><use xlink:href="https://publii.garyinnerarity.com/assets/svg/svg-map.svg#twitter"/></svg></a></div></aside><footer class="post__footer"><div class="post__bio box"><div><h4 class="h6"><a href="https://publii.garyinnerarity.com/authors/gary-innerarity/" title="Gary Innerarity">Gary Innerarity</a></h4></div></div><nav class="post__nav box"><div class="post__nav__prev"><a href="https://publii.garyinnerarity.com/vlan-andamp-vtp-basics/" class="post__nav__link" rel="prev"><div class="u-small">Previous Post<h5>VLAN &amp;amp; VTP Basics</h5></div></a></div><div class="post__nav__next"><a href="https://publii.garyinnerarity.com/google-sheets-asset-management/" class="post__nav__link" rel="next"><div class="u-small">Next Post<h5>Google Sheets - Asset Management</h5></div></a></div></nav></footer></article></main><div class="sidebar"><section class="box authors"><h3 class="box__title">Authors</h3><ul class="authors__cotainer"><li class="authors__item"><div><a href="https://publii.garyinnerarity.com/authors/gary-innerarity/" class="authors__title">Gary Innerarity</a></div></li></ul></section><section class="box"><h3 class="box__title">Tags</h3><ul class="tags"><li><a href="https://publii.garyinnerarity.com/tags/cloud-networking/">Cloud-Networking</a> <span class="u-small">(1)</span></li><li><a href="https://publii.garyinnerarity.com/tags/on-prem-servers/">On-Prem Servers</a> <span class="u-small">(1)</span></li><li><a href="https://publii.garyinnerarity.com/tags/switching/">Switching</a> <span class="u-small">(1)</span></li></ul></section></div><footer class="footer"><a class="footer__logo" href="https://publii.garyinnerarity.com/"><img src="https://publii.garyinnerarity.com/media/website/Site-Logo-2.png" alt="Gary Innerarity" width="1580" height="876"></a><nav><ul class="footer__nav"></ul></nav><div class="footer__copyright"><p>Proudly created with Publii and published globally with Github and CloudFlare.</p></div></footer></div><script>window.publiiThemeMenuConfig = {    
        mobileMenuMode: 'sidebar',
        animationSpeed: 300,
        submenuWidth: 'auto',
        doubleClickTime: 500,
        mobileMenuExpandableSubmenus: true, 
        relatedContainerForOverlayMenuSelector: '.navbar',
   };</script><script defer="defer" src="https://publii.garyinnerarity.com/assets/js/scripts.min.js?v=ef33954c8f912e6c18ee116825aadc90"></script><script>var images = document.querySelectorAll('img[loading]');

      for (var i = 0; i < images.length; i++) {
         if (images[i].complete) {
               images[i].classList.add('is-loaded');
         } else {
               images[i].addEventListener('load', function () {
                  this.classList.add('is-loaded');
               }, false);
         }
      }</script></body></html>