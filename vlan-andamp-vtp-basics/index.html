<!DOCTYPE html><html lang="en-gb"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>VLAN &amp; VTP Basics - Gary Innerarity</title><meta name="description" content="Creating VLANs is an easy task, but you may run into issues with the VLANs populating between the other access switches (VTP : Client). Option One (used to create the VLAN) **Option One**(config)#vlan 10(config-vlan)#name SALES&amp;**Option Two** (config)#interface vlan 10(config-if)#description SALES(config-if)#ip address a.b.c.d x.x.x.x Option two&hellip;"><meta name="generator" content="Publii Open-Source CMS for Static Site"><link rel="canonical" href="https://publii.garyinnerarity.com/vlan-andamp-vtp-basics/"><link rel="amphtml" href="https://publii.garyinnerarity.com/amp/vlan-andamp-vtp-basics/"><link rel="alternate" type="application/atom+xml" href="https://publii.garyinnerarity.com/feed.xml"><link rel="alternate" type="application/json" href="https://publii.garyinnerarity.com/feed.json"><meta property="og:title" content="VLAN & VTP Basics"><meta property="og:image" content="https://publii.garyinnerarity.com/media/website/Site-Logo-2.png"><meta property="og:site_name" content="Gary Innerarity"><meta property="og:description" content="Creating VLANs is an easy task, but you may run into issues with the VLANs populating between the other access switches (VTP : Client). Option One (used to create the VLAN) **Option One**(config)#vlan 10(config-vlan)#name SALES&amp;**Option Two** (config)#interface vlan 10(config-if)#description SALES(config-if)#ip address a.b.c.d x.x.x.x Option two&hellip;"><meta property="og:url" content="https://publii.garyinnerarity.com/vlan-andamp-vtp-basics/"><meta property="og:type" content="article"><meta name="twitter:card" content="summary"><meta name="twitter:site" content="@ospf2fullstack"><meta name="twitter:title" content="VLAN & VTP Basics"><meta name="twitter:description" content="Creating VLANs is an easy task, but you may run into issues with the VLANs populating between the other access switches (VTP : Client). Option One (used to create the VLAN) **Option One**(config)#vlan 10(config-vlan)#name SALES&amp;**Option Two** (config)#interface vlan 10(config-if)#description SALES(config-if)#ip address a.b.c.d x.x.x.x Option two&hellip;"><meta name="twitter:image" content="https://publii.garyinnerarity.com/media/website/Site-Logo-2.png"><link rel="stylesheet" href="https://publii.garyinnerarity.com/assets/css/style.css?v=08042fa161ed0afdadab65e17096ecea"><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://publii.garyinnerarity.com/vlan-andamp-vtp-basics/index.html"},"headline":"VLAN & VTP Basics","datePublished":"2022-10-14T10:49","dateModified":"2022-10-14T10:49","image":{"@type":"ImageObject","url":"https://publii.garyinnerarity.com/media/website/Site-Logo-2.png","height":876,"width":1580},"description":"Creating VLANs is an easy task, but you may run into issues with the VLANs populating between the other access switches (VTP : Client). Option One (used to create the VLAN) **Option One**(config)#vlan 10(config-vlan)#name SALES&amp;**Option Two** (config)#interface vlan 10(config-if)#description SALES(config-if)#ip address a.b.c.d x.x.x.x Option two&hellip;","author":{"@type":"Person","name":"Gary Innerarity","url":"https://publii.garyinnerarity.com/authors/gary-innerarity/"},"publisher":{"@type":"Organization","name":"Gary Innerarity","logo":{"@type":"ImageObject","url":"https://publii.garyinnerarity.com/media/website/Site-Logo-2.png","height":876,"width":1580}}}</script></head><body><header class="topbar" id="js-header"><div class="topbar__inner"><a class="logo" href="https://publii.garyinnerarity.com/index.html"><img src="https://publii.garyinnerarity.com/media/website/Site-Logo-2.png" alt="Gary Innerarity" width="1580" height="876"></a><nav class="navbar"><button class="navbar__toggle" aria-label="Menu" aria-haspopup="true" aria-expanded="false"><span class="navbar__toggle-box"><span class="navbar__toggle-inner">Menu</span></span></button><ul class="navbar__menu"><li><a href="https://publii.garyinnerarity.com/index.html" target="_self">Home</a></li><li><a href="https://publii.garyinnerarity.com/tags/index.html" target="_self">Categories</a></li></ul></nav></div></header><div class="content"><div class="infobar"><div class="infobar__update">Last Updated: <time datetime="2022-10-14T13:54">October 14, 2022</time></div><div class="infobar__search"></div></div><main class="main"><article class="post"><header class="u-header post__header"><h1>VLAN &amp; VTP Basics</h1><div class="u-header__meta u-small"><div><a href="https://publii.garyinnerarity.com/authors/gary-innerarity/index.html" title="Gary Innerarity">Gary Innerarity</a> <time datetime="2022-10-14T10:49">October 14, 2022 </time><a href="https://publii.garyinnerarity.com/tags/networking/index.html" class="u-tag u-tag--1">Networking</a></div></div></header><div class="post__entry u-inner"><p></p><figure class="wp-block-image"><figure class="wp-image-451"><img loading="lazy" src="https://publii.garyinnerarity.com/media/posts/40/sh-vlan-brief.png" sizes="(max-width: 48em) 100vw, 768px" srcset="https://publii.garyinnerarity.com/media/posts/40/responsive/sh-vlan-brief-xs.png 300w, https://publii.garyinnerarity.com/media/posts/40/responsive/sh-vlan-brief-sm.png 480w, https://publii.garyinnerarity.com/media/posts/40/responsive/sh-vlan-brief-md.png 768w, https://publii.garyinnerarity.com/media/posts/40/responsive/sh-vlan-brief-lg.png 1024w, https://publii.garyinnerarity.com/media/posts/40/responsive/sh-vlan-brief-xl.png 1360w, https://publii.garyinnerarity.com/media/posts/40/responsive/sh-vlan-brief-2xl.png 1600w" alt=""></figure></figure><p></p><p></p><p>Creating VLANs is an easy task, but you may run into issues with the VLANs populating between the other access switches (VTP : Client).</p><p></p><p></p><p><strong>Option One</strong> (used to create the VLAN)</p><p></p><p></p><pre class="wp-block-code"><code>**Option One**(config)#vlan 10(config-vlan)#name SALES&amp;**Option Two** (config)#interface vlan 10(config-if)#description SALES(config-if)#ip address a.b.c.d x.x.x.x</code></pre><p></p><p></p><p>Option two allows you to set a static interface for IP routing. </p><p></p><p></p><hr class="wp-block-separator"><p></p><p>For <strong>EXTENDED </strong>VLANs(1006-4096), VTP mode must be in Transparent. Server mode should throw errors, probably not in IOL devices.</p><p></p><p></p><pre class="wp-block-code"><code>(config)#vtp mode transparent</code></pre><p></p><p></p><hr class="wp-block-separator"><p></p><p>By default all cisco catalysts come preconfigured with VTP server mode. You will need to change this on all access switches not serving vlans. First,</p><p></p><p></p><pre class="wp-block-code"><code>(config)#vtp mode Serveror(config)#vtp mode Transparentor(config)#vtp mode Client</code></pre><p></p><p></p><p>then, set the domain</p><p></p><p></p><pre class="wp-block-code"><code>(config)#vtp domain CISCO</code></pre><p></p><p></p><p>This will put the switch in client mode and on the same domain as the VTP server. Allowing it to accept VLAN configs from the core or Firewall. If you run into an MD5 digest checksum mismatch error, you may need to change the password on all devices in the same domain that need VTP configs, like this: </p><p></p><p></p><pre class="wp-block-code"><code>(config)#vtp password cisco</code></pre><p></p><p></p><p>You will then want to issue the below command to show the current status: </p><p></p><p></p><pre class="wp-block-code"><code>#show vtp statusSw1&gt;sh vtp statusVTP Version capable             : 1 to 3VTP version running             : 1VTP Domain Name                 : CISCOVTP Pruning Mode                : DisabledVTP Traps Generation            : DisabledDevice ID                       : aabb.cc00.1200Configuration last modified by 0.0.0.0 at 7-5-19 23:13:37Local updater ID is 0.0.0.0 (no valid interface found)Feature VLAN:--------------VTP Operating Mode                : ServerMaximum VLANs supported locally   : 1005Number of existing VLANs          : 9Configuration Revision            : 0MD5 digest                        : 0x87 0x6A 0xFA 0xCB 0xD3 0x27 0xDF 0x0C                                    0x04 0xF4 0x94 0x8E 0x18 0xEA 0xE9 0x84</code></pre><p></p><p></p><p></p></div><aside class="post__aside"><div class="post__last-updated u-small">This article was updated on October 14, 2022</div><div class="post__share"><a href="https://twitter.com/share?url=https%3A%2F%2Fpublii.garyinnerarity.com%2Fvlan-andamp-vtp-basics%2Findex.html&amp;via=%40ospf2fullstack&amp;text=VLAN%20%26%20VTP%20Basics" class="js-share twitter" title="Share with Twitter" rel="nofollow noopener noreferrer" aria-label="Share with Twitter"><svg class="u-icon"><use xlink:href="https://publii.garyinnerarity.com/assets/svg/svg-map.svg#twitter"/></svg></a></div></aside><footer class="post__footer"><div class="post__bio box"><div><h4 class="h6"><a href="https://publii.garyinnerarity.com/authors/gary-innerarity/index.html" title="Gary Innerarity">Gary Innerarity</a></h4></div></div><nav class="post__nav box"><div class="post__nav__prev"><a href="https://publii.garyinnerarity.com/mremoteng/index.html" class="post__nav__link" rel="prev"><div class="u-small">Previous Post<h5>mRemoteNG</h5></div></a></div><div class="post__nav__next"><a href="https://publii.garyinnerarity.com/google-sheets-asset-management/index.html" class="post__nav__link" rel="next"><div class="u-small">Next Post<h5>Google Sheets - Asset Management</h5></div></a></div></nav></footer></article></main><div class="sidebar"><section class="box authors"><h3 class="box__title">Authors</h3><ul class="authors__cotainer"><li class="authors__item"><div><a href="https://publii.garyinnerarity.com/authors/gary-innerarity/index.html" class="authors__title">Gary Innerarity</a></div></li></ul></section><section class="box"><h3 class="box__title">Tags</h3><ul class="tags"><li><a href="https://publii.garyinnerarity.com/tags/administration/index.html">Administration</a> <span class="u-small">(2)</span></li><li><a href="https://publii.garyinnerarity.com/tags/automation/index.html">Automation</a> <span class="u-small">(2)</span></li><li><a href="https://publii.garyinnerarity.com/tags/books/index.html">Books</a> <span class="u-small">(3)</span></li><li><a href="https://publii.garyinnerarity.com/tags/certs/index.html">Certs</a> <span class="u-small">(4)</span></li><li><a href="https://publii.garyinnerarity.com/tags/conferences/index.html">Conferences</a> <span class="u-small">(1)</span></li><li><a href="https://publii.garyinnerarity.com/tags/labs/index.html">Labs</a> <span class="u-small">(2)</span></li><li><a href="https://publii.garyinnerarity.com/tags/networking/index.html">Networking</a> <span class="u-small">(5)</span></li><li><a href="https://publii.garyinnerarity.com/tags/on-prem-servers/index.html">On-Prem Servers</a> <span class="u-small">(1)</span></li><li><a href="https://publii.garyinnerarity.com/tags/rant/index.html">Rant</a> <span class="u-small">(1)</span></li><li><a href="https://publii.garyinnerarity.com/tags/security/index.html">Security</a> <span class="u-small">(1)</span></li></ul></section></div><footer class="footer"><a class="footer__logo" href="https://publii.garyinnerarity.com/index.html"><img src="https://publii.garyinnerarity.com/media/website/Site-Logo-2.png" alt="Gary Innerarity" width="1580" height="876"></a><nav><ul class="footer__nav"></ul></nav><div class="footer__copyright"><p>Proudly created with Publii and published globally with Github and CloudFlare.</p></div></footer></div><script>window.publiiThemeMenuConfig = {    
        mobileMenuMode: 'sidebar',
        animationSpeed: 300,
        submenuWidth: 'auto',
        doubleClickTime: 500,
        mobileMenuExpandableSubmenus: true, 
        relatedContainerForOverlayMenuSelector: '.navbar',
   };</script><script defer="defer" src="https://publii.garyinnerarity.com/assets/js/scripts.min.js?v=ef33954c8f912e6c18ee116825aadc90"></script><script>var images = document.querySelectorAll('img[loading]');

      for (var i = 0; i < images.length; i++) {
         if (images[i].complete) {
               images[i].classList.add('is-loaded');
         } else {
               images[i].addEventListener('load', function () {
                  this.classList.add('is-loaded');
               }, false);
         }
      }</script></body></html>